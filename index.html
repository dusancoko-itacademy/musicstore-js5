<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Music Store</title>
    <link
      rel="stylesheet"
      href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
      integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh"
      crossorigin="anonymous"
    />
    <link rel="stylesheet" href="./css/style.css" />
    <link
      rel="stylesheet"
      href="./css/tooltipster.bundle.min.css"
    />
    <link
      rel="stylesheet"
      href="./css/plugins/tooltipster/sideTip/themes/tooltipster-sideTip-borderless.min.css"
    />
  </head>

  <body>
    <div class="container wrapper">
      <!-- Wrapper -->
      <header>
        <nav class="navbar navbar-expand-lg bg-light">
          <a class="navbar-brand" href="#">
            <img
              id="music-store-logo"
              src="./images/music_shop.png"
              alt="Music shop logo"
            />
          </a>
          <button
            class="navbar-toggler"
            type="button"
            data-toggle="collapse"
            data-target="#navbarText"
            aria-controls="navbarText"
            aria-expanded="false"
            aria-label="Toggle navigation"
          >
            <span class="navbar-toggler-icon"></span>
          </button>
          <div class="collapse navbar-collapse" id="navbarText">
            <ul class="navbar-nav mr-auto">
              <li class="nav-item active">
                <a class="nav-link" href="#">Home</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">Artists</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">Genres</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">Editor's pick</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">Newsletter</a>
              </li>
              <li class="nav-item">
                <a class="nav-link" href="#">Contact</a>
              </li>
            </ul>
            <div>
              <div>
                <a id="cart" href="#" data-tooltip-content="#display-cart" >
                  Cart (<span id="itemCount">0</span>)</a>
                <div>
                  <div id="display-cart"></div>
                </div>
              </div>
              <div>
                <a href="#">Login / Register</a>
              </div>
            </div>
          </div>
        </nav>
      </header>
      <!-- Carousel sekcija -->
      <div
        id="carouselExampleSlidesOnly"
        class="carousel slide"
        data-ride="carousel"
      >
        <div class="carousel-inner">
          <div class="carousel-item active" data-interval="1000">
            <picture>
              <source
                media="(max-width: 660px)"
                srcset="./images/carousel/genesis_small.png"
              />
              <source
                media="(min-width: 661px)"
                srcset="./images/carousel/genesis.png"
              />
              <img
                class="img-fluid"
                src="./images/carousel/genesis.png"
                alt="Genesis carousel ad"
              />
            </picture>
          </div>
          <div class="carousel-item" data-interval="2000">
            <picture>
              <source
                media="(max-width: 660px)"
                srcset="./images/carousel/parkwaydrive_small.png"
              />
              <source
                media="(min-width: 661px)"
                srcset="./images/carousel/parkwaydrive.png"
              />
              <img
                class="img-fluid"
                src=".images/carousel/parkwaydrive.png"
                alt="Parkway Drive carousel ad"
              />
            </picture>
          </div>
          <div class="carousel-item" data-interval="3000">
            <picture>
              <source
                media="(max-width: 660px)"
                srcset="./images/carousel/adtr_small.png"
              />
              <source
                media="(min-width: 661px)"
                srcset="./images/carousel/adtr.png"
              />
              <img
                class="img-fluid"
                src="./images/carousel/adtr.png"
                alt="ADTR carousel ad"
              />
            </picture>
          </div>
        </div>
      </div>
      <!-- end carousel -->
      <h1>Popular releases</h1>
      <!-- Popular releases -->
      <div class="container-fluid">
        <div class="row">
          <div class="col-md-4">
            <div>
              <img
                class="img-fluid"
                src="./images/album_cover/Journey_-_Escape.jpg"
                alt="Journey - Escape cover"
              />
            </div>
            <h3>Escape</h3>
            <h4>Journey</h4>
            <div>
              Lorem ipsum dolor sit amet consectetur adipisicing elit. Ullam,
              aliquid?
            </div>
            <p>Price: <b>$9.99</b></p>
            <button
              type="button"
              class="btn btn-primary album"
              data-barcode="1"
              data-title="Escape"
              data-artist="Journey"
              data-cover="./images/album_cover/Journey_-_Escape.jpg"
              data-price="9.99"
            >
              Buy
            </button>
          </div>
          <div class="col-md-4">
            <div>
              <img
                class="img-fluid"
                src="./images/album_cover/Alcest_-_Souvenirs_D_un_Autre_Monde.jpg"
                alt="Alcest - Souvenirs D'un Autre Monde cover"
              />
            </div>
            <h3>Souvenirs D'un Autre Monde</h3>
            <h4>Alcest</h4>
            <div>
              Lorem ipsum dolor sit amet consectetur adipisicing elit. Ullam,
              aliquid?
            </div>
            <p>Price: <b>$10.99</b></p>
            <button
              type="button"
              class="btn btn-primary album"
              data-barcode="2"
              data-title="Souvenirs D'un Autre Monde"
              data-artist="Alcest"
              data-cover="./images/album_cover/Alcest_-_Souvenirs_D_un_Autre_Monde.jpg"
              data-price="10.99"
            >
              Buy
            </button>
          </div>
          <div class="col-md-4">
            <div>
              <img
                class="img-fluid"
                src="./images/album_cover/Tears_For_Fears_-_Songs_From_The_Big_Chair.jpg"
                alt="Tears For Fears - Song from the Big Chair cover"
              />
            </div>
            <h3>Song from the Big Chair</h3>
            <h4>Tears For Fears</h4>
            <div>
              Lorem ipsum dolor sit amet consectetur adipisicing elit. Ullam,
              aliquid?
            </div>
            <p>Price: <b>$9.99</b></p>
            <button
              type="button"
              class="btn btn-primary album"
              data-barcode="3"
              data-title="Song from the Big Chair"
              data-artist="Tears For Fears"
              data-cover="./images/album_cover/Tears_For_Fears_-_Songs_From_The_Big_Chair.jpg"
              data-price="9.99"
            >
              Buy
            </button>
          </div>
        </div>
      </div>
      <!-- end Popular releases -->
      <!-- Browse by genre -->
      <h1>Browse by genre</h1>
      <div id="browse-by-genre">
        <ul class="nav">
          <li class="nav-item">
            <a class="nav-link" href="#pop">Pop</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#rock">Rock</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#jazz">Jazz</a>
          </li>
          <li class="nav-item">
            <a class="nav-link" href="#metal">Metal</a>
          </li>
        </ul>
        <!-- Pop genre -->
        <div id="pop" class="container-fluid">
          <div class="row browse-container">
            <div class="col-md-3">
              <div>
                <img
                  class="img-fluid"
                  src="./images/album_cover/Belinda_Carlisle_-_Heaven_On_Earth.jpg"
                  alt="Belinda Carlisle - Heaven On Earth cover"
                />
              </div>
              <h4>Heaven On Earth</h4>
              <h5>Belinda Carlisle</h5>
              <p>Price: <b>$9.99</b></p>
              <button type="button" class="btn btn-primary">Buy</button>
            </div>
            <div class="col-md-3">
              <div>
                <img
                  class="img-fluid"
                  src="./images/album_cover/Cyndi_Lauper_-_Shes_So_Unusual.jpg"
                  alt="Cyndi Lauper - She's So Unusual cover"
                />
              </div>
              <h4>She's So Unusual</h4>
              <h5>Cyndi Lauper</h5>
              <p>Price: <b>$9.99</b></p>
              <button type="button" class="btn btn-primary">Buy</button>
            </div>
            <div class="col-md-3">
              <div>
                <img
                  class="img-fluid"
                  src="./images/album_cover/Michael_Jackson_-_Dangerous.jpg"
                  alt="Michael Jackson - Dangerous cover"
                />
              </div>
              <h4>Dangerous</h4>
              <h5>Michael Jackson</h5>
              <p>Price: <b>$9.99</b></p>
              <button type="button" class="btn btn-primary">Buy</button>
            </div>
            <div class="col-md-3">
              <div>
                <img
                  class="img-fluid"
                  src="./images/album_cover/Tears_For_Fears_-_The_Seeds_Of_Love.jpg"
                  alt="Tears For Fears - The Seeds Of Love cover"
                />
              </div>
              <h4>The Seeds Of Love</h4>
              <h5>Tears For Fears</h5>
              <p>Price: <b>$9.99</b></p>
              <button type="button" class="btn btn-primary">Buy</button>
            </div>
          </div>
        </div>
        <!-- Rock genre -->
        <div id="rock" class="container-fluid">
          <div class="row browse-container">
            <div class="col-md-3">
              <div>
                <img
                  class="img-fluid"
                  src="./images/album_cover/Toto_-_The_Seventh_One.jpg"
                  alt="Toto - The Seventh One cover"
                />
              </div>
              <h4>The Seventh One</h4>
              <h5>Toto</h5>
              <p>Price: <b>$9.99</b></p>
              <button type="button" class="btn btn-primary">Buy</button>
            </div>
            <div class="col-md-3">
              <div>
                <img
                  class="img-fluid"
                  src="./images/album_cover/Pink_Floyd_-_The_Wall.jpg"
                  alt="Pink Floyd - The Wall cover"
                />
              </div>
              <h4>The Wall</h4>
              <h5>Pink Floyd</h5>
              <p>Price: <b>$9.99</b></p>
              <button type="button" class="btn btn-primary">Buy</button>
            </div>
            <div class="col-md-3">
              <div>
                <img
                  class="img-fluid"
                  src="./images/album_cover/Pink_Floyd_-_The_Division_Bell.jpg"
                  alt="Pink Floyd - The Division Bell cover"
                />
              </div>
              <h4>The Division Bell</h4>
              <h5>Pink Floyd</h5>
              <p>Price: <b>$9.99</b></p>
              <button type="button" class="btn btn-primary">Buy</button>
            </div>
            <div class="col-md-3">
              <div>
                <img
                  class="img-fluid"
                  src="./images/album_cover/Pink_Floyd_-_Wish_You_Were_Here.jpg"
                  alt="Pink Floyd - Wish You Were Here cover"
                />
              </div>
              <h4>Wish You Were Here</h4>
              <h5>Pink Floyd</h5>
              <p>Price: <b>$9.99</b></p>
              <button type="button" class="btn btn-primary">Buy</button>
            </div>
          </div>
        </div>
        <!-- Jazz genre -->
        <div id="jazz" class="container-fluid">
          <div class="row browse-container">
            <div class="col-md-3">
              <div>
                <img
                  class="img-fluid"
                  src="./images/album_cover/Miles_Davis_-_In_A_Silent_Way.jpg"
                  alt="Miles Davis - In A Silent Way cover"
                />
              </div>
              <h4>In A Silent Way</h4>
              <h5>Miles Davis</h5>
              <p>Price: <b>$9.99</b></p>
              <button type="button" class="btn btn-primary">Buy</button>
            </div>
          </div>
        </div>
        <!-- Metal genre -->
        <div id="metal" class="container-fluid">
          <div class="row browse-container"></div>
        </div>
      </div>
      <!-- end Browse by genre -->
    </div>
    <!-- end wrapper -->

    <script
      src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.4.1/jquery.min.js"
      integrity="sha256-CSXorXvZcTkaix6Yvo6HppcZGetbYMGWSFlBw8HfCJo="
      crossorigin="anonymous"
    ></script>
    <script
      src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
      integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo"
      crossorigin="anonymous"
    ></script>
    <script
      src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
      integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6"
      crossorigin="anonymous"
    ></script>
    <script src="https://cdn.bootcss.com/jquery.tabslet.js/1.7.3/jquery.tabslet.min.js"></script>
    <script
      src="./js/tooltipster.bundle.min.js"
    ></script>
    <script>
      $("#browse-by-genre").tabslet();

      /* JQuery sekcija za uzimanje albuma */
      const $albums = $(".album");
      const $itemCount = $("#itemCount");
      const $divDisplayCart = $("#display-cart");

      const cart = [];

      function add_to_cart(album) {
        for (let item of cart) {
          if (item.barcode === album.barcode) {
            item.quantity++;
            return;
          }
        }
        cart.push(album);
      }

      function count_items() {
        let count = 0;
        for (let item of cart) {
          count += item.quantity;
        }
        return count;
      }

      function display_cart() {
        if(cart.length == 0) {
            $divDisplayCart.html("There are not items in the cart.");
            return;
        }

        let html_str = "<table class='table table-dark'>";
        html_str += "<thead><tr><th>Cover</th><th>Item</th><th>Quantity</th><th>Price</th></tr></thead>" 
        html_str += "<tbody>";
        for(let item of cart) {
           html_str += "<tr>"; 
            html_str += "<td><img class='cover' src='" + item.cover + "' />";
            html_str += "<td>" + item.title + " - " + item.artist + "</td>";
            html_str += "<td>" + item.quantity + "<td>";
            html_str += "<td>" + (item.price * item.quantity) + "</td>";
            html_str += "</tr>";
        }
        html_str += "</tbody></table>";
        $divDisplayCart.html(html_str);
      }

      $albums.on("click", (e) => {
        // Album (dugme) koji je kliknut - e.target
        const $album = $(e.target);
        const barcode = $album.attr("data-barcode");
        const title = $album.attr("data-title");
        const artist = $album.attr("data-artist");
        const cover = $album.attr("data-cover");
        const price = Number($album.attr("data-price"));

        const album = {
          barcode: barcode,
          title: title,
          artist: artist,
          cover: cover,
          price: price,
          quantity: 1,
        };

        add_to_cart(album);
        $itemCount.html(count_items());
      });

      $("#cart").tooltipster({
        theme: "tooltipster-borderless",
        trigger: 'click',
        functionBefore: display_cart
      });
    </script>
  </body>
</html>
